{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/global-api.js","../src/compiler/parse.js","../src/compiler/index.js","../src/observe/dep.js","../src/observe/watcher.js","../src/vdom/index.js","../src/vdom/patch.js","../src/lifecycle.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["const starts = {};\nconst LIFE_CYCLE_LIST = [\"beforeCreat\", \"created\"];\nLIFE_CYCLE_LIST.forEach((hook) => {\n  starts[hook] = function (p, c) {\n    if (c) {\n      if (p) {\n        return p.concat(c);\n      } else {\n        return [c];\n      }\n    } else {\n      return p;\n    }\n  };\n});\n\nexport function mergeOptions(parent, child) {\n  const options = {};\n\n  for (let key in parent) {\n    mergeKey(key);\n  }\n\n  for (let key in child) {\n    if (!options.hasOwnProperty(key)) {\n      mergeKey(key);\n    }\n  }\n\n  function mergeKey(key) {\n    if (starts[key]) {\n      options[key] = starts[key](parent[key], child[key]);\n    } else {\n      options[key] = child[key] || parent[key];\n    }\n  }\n\n  return options;\n}\n","import { mergeOptions } from \"./utils\";\n\nexport function initGlobalApi(Vue) {\n  Vue.options = {};\n\n  Vue.mixin = function (mixin) {\n    this.options = mergeOptions(this.options, mixin);\n  };\n}\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\nconst startTagClose = /^\\s*(\\/?)>/\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nexport const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\n\nexport const ELEMENT_TYPE = 1\nexport const TEXT_TYPE = 3\n\nexport function parseHTML(html) {\n  const stack = []\n  let currentTag = undefined\n  let root = undefined\n\n  function createASTElement(tag, attrs) {\n    return {\n      tag,\n      type: ELEMENT_TYPE,\n      children: [],\n      attrs,\n      parent: null,\n    }\n  }\n\n  function start(tagName, attrs) {\n    const ast = createASTElement(tagName, attrs)\n\n    if (!root) {\n      root = ast\n    } else if (currentTag) {\n      currentTag.children.push(ast)\n      ast.parent = currentTag\n    }\n\n    currentTag = ast\n    stack.push(ast)\n  }\n\n  function chars(text) {\n    text = text.replace(/\\s/g, '')\n    text &&\n      currentTag.children.push({\n        type: TEXT_TYPE,\n        text,\n        parent: currentTag,\n      })\n  }\n\n  function end(tagName) {\n    stack.pop()\n    currentTag = stack[stack.length - 1]\n  }\n\n  while (html) {\n    const textEnd = html.indexOf('<')\n\n    function advance(n) {\n      html = html.substring(n)\n    }\n\n    function parseStartTag() {\n      const start = html.match(startTagOpen)\n\n      if (start) {\n        const match = {\n          tagName: start[1],\n          attrs: [],\n        }\n\n        advance(start[0].length)\n\n        let attr\n        let end\n        while (\n          !(end = html.match(startTagClose)) &&\n          (attr = html.match(attribute))\n        ) {\n          advance(attr[0].length)\n\n          match.attrs.push({\n            name: attr[1],\n            value: attr[3] || attr[4] || attr[5],\n          })\n        }\n\n        if (end) {\n          advance(end[0].length)\n        }\n\n        return match\n      }\n\n      return false\n    }\n\n    if (textEnd === 0) {\n      const startTagMatch = parseStartTag()\n\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs)\n        continue\n      }\n\n      let endTagName = html.match(endTag)\n\n      if (endTagName) {\n        end(endTagName[1])\n        advance(endTagName[0].length)\n        continue\n      }\n    }\n\n    if (textEnd > 0) {\n      const text = html.substring(0, textEnd)\n\n      if (text) {\n        chars(text)\n        advance(text.length)\n      }\n    }\n  }\n\n  return root\n}\n","import { defaultTagRE, ELEMENT_TYPE, parseHTML, TEXT_TYPE } from './parse'\n\nfunction genProps(attrs) {\n  let str = ''\n\n  attrs.forEach((attr) => {\n    if (attr.name === 'style') {\n      const valArray = attr.value.split(';')\n      attr.value = {}\n      valArray.forEach((item) => {\n        const [key, value] = item.split(':')\n        attr.value[key] = value\n      })\n    }\n\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\n  })\n\n  return `{${str.slice(0, -1)}}`\n}\n\nfunction gen(node) {\n  if (node.type === ELEMENT_TYPE) {\n    return codegen(node)\n  } else if (node.type === TEXT_TYPE) {\n    if (!defaultTagRE.test(node.text)) {\n      return `_v(${JSON.stringify(node.text)})`\n    } else {\n      const tokens = []\n      let match\n      let lastIndex = 0\n      defaultTagRE.lastIndex = 0\n      while ((match = defaultTagRE.exec(node.text))) {\n        if (match.index > lastIndex) {\n          const middleText = node.text.slice(lastIndex, match.index)\n          tokens.push(JSON.stringify(middleText))\n        }\n        tokens.push(`_s(${match[1]})`)\n        lastIndex = match.index + match[0].length\n      }\n\n      if (lastIndex < node.text.length - 1) {\n        tokens.push(JSON.stringify(node.text.slice(lastIndex)))\n      }\n\n      return `_v(${tokens.join('+')})`\n    }\n  }\n}\n\nfunction genChildren(children) {\n  if (children) {\n    return children.map((item) => gen(item)).join(',')\n  }\n}\n\nfunction codegen(ast) {\n  const code = `_c('${ast.tag}', ${\n    ast.attrs.length > 0 ? genProps(ast.attrs) : 'null'\n    } ${ast.children.length ? `,${genChildren(ast.children)}` : ''})`\n  return code\n}\n\nexport function compileToFunction(template) {\n  const ast = parseHTML(template)\n  let code = codegen(ast)\n  code = `with(this) {\n    return ${code}\n  }`\n  const render = new Function(code)\n\n  return render\n}\n","let id = 0\n\nexport class Dep {\n  constructor() {\n    this.id = id ++\n    this.subs = [] // save watcher\n  }\n\n  depend() {\n    Dep.target.addDep(this)\n  }\n\n  addSub(watcher) {\n    this.subs.push(watcher)\n  }\n\n  notify() {\n    this.subs.forEach(item => item.update())\n  }\n}\n\nDep.target = null\n\nlet stack = []\nexport function pushTarget(watcher) {\n  stack.push(watcher)\n  Dep.target = watcher\n}\n\nexport function popTarget() {\n  stack.pop()\n  Dep.target = stack[stack.length - 1]\n}\n\n","import { popTarget, pushTarget } from \"./dep\"\n\nlet id = 0\n\nexport class Watcher {\n  constructor(vm, expOrFn, options, cb) {\n    this.id = id ++\n    this.lazy = options.lazy\n    this.dirty = this.lazy\n    // this.isRenderWatcher = isRenderWatcher\n\n    if (typeof expOrFn === 'string') {\n      this.getter = function() {\n        return vm[expOrFn]\n      }\n    } else {\n      this.getter = expOrFn\n    }\n\n    this.vm = vm\n    this.deps = []\n    this.depSet = new Set()\n    this.cb = cb\n\n    this.value = this.lazy ? null : this.get()\n    this.user = options.user\n  }\n\n  update() {\n    if (this.lazy) {\n      this.dirty = true\n    } else {\n      queueWatcher(this)\n    }\n  }\n\n  depend() {\n    let i = this.deps.length\n    while(i--) {\n      this.deps[i].depend()\n    }\n  }\n\n  addDep(dep) {\n    if (this.depSet.has(dep.id)) {\n      return\n    }\n\n    this.deps.push(dep)\n    this.depSet.add(dep.id)\n    dep.addSub(this)\n  }\n\n  evaluate() {\n    this.value = this.get()\n    this.dirty = false\n  }\n\n  get() {\n    pushTarget(this)\n    const value = this.getter.call(this.vm)\n    popTarget()\n\n    return value\n  }\n\n  run() {\n    const oldValue = this.value\n    const newValue = this.get()\n    if (this.user) {\n      this.cb.call(this.vm, newValue, oldValue)\n    }\n  }\n}\n\nlet watcherQueue = []\nlet has = {}\nlet pending = false\n\nfunction flushWatcherQueue() {\n  const copyedQueue = [...watcherQueue]\n  watcherQueue = []\n  has = {}\n  pending = false\n\n  copyedQueue.forEach(item => {\n    item.run()\n  })\n}\n\nfunction queueWatcher(watcher) {\n  const { id } = watcher\n\n  if (has[id]) {\n    return\n  }\n\n  watcherQueue.push(watcher)\n  has[id] = watcher\n\n  if (!pending) {\n    pending = true\n    nextTick(flushWatcherQueue)\n  }\n}\n\nlet callbackList = []\nlet waiting = false\n\nfunction flushCallbackList() {\n  const copyedCallbackList = [...callbackList]\n  callbackList = []\n  waiting = false\n  copyedCallbackList.forEach(item => item())\n\n}\n\nexport function nextTick(callback) {\n  callbackList.push(callback)\n\n  if (!waiting) {\n    timerFunc()\n    waiting = true\n  }\n}\n\nlet timerFunc\n\nif (Promise) {\n  timerFunc = () => {\n    Promise.resolve().then(flushCallbackList)\n  }\n} else if(MutationObserver) {\n  const observer = new MutationObserver(flushCallbackList)\n  const textNode = document.createTextNode(1)\n  observer.observe(textNode, {\n    characterData: true\n  })\n  timerFunc = () => {\n    textNode.textContent = 2\n  }\n} else if (setTimeout) {\n  timerFunc = () => {\n    setTimeout(flushCallbackList)\n  }\n}\n","export function createElementVNode(vm, tag, data, ...children) {\r\n  data = data || {}\r\n  const key = data.key\r\n  key && delete data.key\r\n  return vnode(vm, tag, key, data, children)\r\n}\r\n\r\nexport function createTextVNode(vm, text) {\r\n  return vnode(vm, undefined, undefined, undefined, undefined, text)\r\n}\r\n\r\nexport function vnode(vm, tag, key, data, children, text) {\r\n  return {\r\n    vm,\r\n    tag,\r\n    key,\r\n    data,\r\n    children,\r\n    text\r\n  }\r\n}\r\n\r\nexport function isSameVnode(vnode1, vnode2) {\r\n  return vnode1.tag === vnode2.tag && vnode1.key === vnode2.key\r\n}\r\n","import { isSameVnode } from \"./index\";\n\nfunction patchProps(el, oldProps, props) {\n  const oldStyle = oldProps.style || {}\n  const style = props.style || {}\n\n  for (let key in oldStyle) {\n    if (!style[key]) {\n      el.style[key] = ''\n    }\n  }\n\n  for (let key in oldProps) {\n    if (!props[key]) {\n      el.removeAttribute(key)\n    }\n  }\n\n  for (const key in props) {\n    if (key === 'style') {\n      for (const styleName in props[key]) {\n        el.style[styleName] = props[key][styleName]\n      }\n    } else {\n      el.setAttribute(key, props[key])\n    }\n  }\n}\n\nexport function createElm(vnode) {\n  const { tag, data, children, text } = vnode\n\n  if (typeof tag === 'string') {\n    vnode.el = document.createElement(tag)\n    patchProps(vnode.el, {}, data)\n    children.forEach((item) => {\n      vnode.el.appendChild(createElm(item))\n    })\n  } else {\n    vnode.el = document.createTextNode(text)\n  }\n\n  return vnode.el\n}\n\nexport function patch(oldVnode, vnode) {\n  const isRealElement = oldVnode.nodeType;\n\n  if (isRealElement) {\n    const elm = oldVnode;\n    const parentElm = elm.parentNode;\n    const newElm = createElm(vnode);\n    parentElm.insertBefore(newElm, elm.nextSibling);\n    parentElm.removeChild(elm);\n\n    return newElm;\n  } else {\n    patchVnode(oldVnode, vnode)\n  }\n}\n\nfunction patchVnode(oldVnode, vnode) {\n  if (!isSameVnode(oldVnode, vnode)) {\n    const el = createElm(vnode);\n    oldVnode.el.parentNode.replaceChild(el, oldVnode.el);\n    return el;\n  }\n\n  const el = (vnode.el = oldVnode.el);\n  if (!vnode.tag) {\n    if (oldVnode.text !== vnode.text) {\n      el.textContent = vnode.text;\n    }\n  }\n\n  patchProps(el, vnode.data, oldVnode.data)\n\n  const oldChildren = oldVnode.children || []\n  const newChildren = vnode.children\n\n  if (oldChildren.length > 0 && newChildren.length > 0) {\n\n  } else if (newChildren.length > 0) {\n    mountChildren(el, newChildren)\n  } else if (oldChildren.length > 0) {\n    el.innerHTML = ''\n  }\n}\n\nfunction mountChildren(el, children) {\n  for (let i = 0; i < children.length; i++) {\n    const node = createElm(children[i])\n    el.appendChild(node)\n  }\n}\n","import { Watcher } from './observe/watcher'\r\nimport { createElementVNode, createTextVNode } from './vdom/index'\r\nimport { patch } from './vdom/patch'\r\n\r\nexport function initLifyCycle(Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    const vm = this\r\n    const el = vm.$el\r\n    vm.$el = patch(el, vnode)\r\n  }\r\n\r\n  Vue.prototype._c = function () {\r\n    return createElementVNode(this, ...arguments)\r\n  }\r\n\r\n  Vue.prototype._v = function () {\r\n    return createTextVNode(this, ...arguments)\r\n  }\r\n\r\n  Vue.prototype._s = function (value) {\r\n    return typeof value === 'string' ? value : JSON.stringify(value)\r\n  }\r\n\r\n  Vue.prototype._render = function () {\r\n    const vm = this\r\n    return vm.$options.render.call(vm)\r\n  }\r\n}\r\n\r\nexport function mountComponent(vm, el) {\r\n  vm.$el = el\r\n\r\n  const updateComponent = () => vm._update(vm._render())\r\n\r\n  new Watcher(vm, updateComponent, true)\r\n}\r\n\r\nexport function callhook(vm, hook) {\r\n  const handlers = vm.$options[hook]\r\n\r\n  if (handlers) {\r\n    handlers.forEach(item => item.call(vm))\r\n  }\r\n}\r\n","const oldArrayProto = Array.prototype\nexport const newArrayProto = Object.create(oldArrayProto)\n\nconst methods = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'reverse',\n  'sort',\n  'splice'\n]\n\nmethods.forEach(item => {\n  newArrayProto[item] = function(...args) {\n    const result = oldArrayProto[item].call(this, ...args)\n\n    let instered = undefined\n    let ob = this.__ob__\n\n    if (item === 'push' || item === 'unshift') {\n      instered = args\n    }\n\n    if (item === 'splice') {\n      instered = args.slice(2)\n    }\n\n    if (instered) {\n      ob.observeArray(instered)\n    }\n\n    ob.dep.notify()\n    return result\n  }\n})\n","import { newArrayProto } from './array'\nimport { Dep } from './dep'\n\nclass Observer {\n  constructor(data) {\n    this.dep = new Dep()\n\n    Object.defineProperty(data, '__ob__', {\n      value: this,\n      enumerable: false,\n    })\n\n    if (Array.isArray(data)) {\n      data.__proto__ = newArrayProto\n      this.observeArray(data)\n      return\n    }\n\n    this.walk(data)\n  }\n\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key])\n    })\n  }\n\n  observeArray(data) {\n    data.forEach((item) => observe(item))\n  }\n}\n\nfunction depentArray(val) {\n  for (let i = 0; i < val.length; i++) {\n    const current = val[i]\n    current.__ob__ && current.__ob__.dep.depend()\n\n    if (Array.isArray(current)) {\n      depentArray(current)\n    }\n  }\n}\n\nfunction defineReactive(data, key, val) {\n  const childOb = observe(val)\n\n  // every reactive data has a dep\n  const dep = new Dep()\n\n  Object.defineProperty(data, key, {\n    configurable: true,\n    enumerable: true,\n    get() {\n      if (Dep.target) {\n        dep.depend()\n\n        childOb && childOb.dep.depend()\n\n        if(Array.isArray(val)) {\n          depentArray(val)\n        }\n      }\n\n      return val\n    },\n\n    set(newVal) {\n      if (newVal === val) {\n        return\n      }\n      observe(newVal)\n      val = newVal\n      dep.notify()\n    },\n  })\n}\n\nexport default function observe(data) {\n  if (typeof data !== 'object' && data !== null) {\n    return\n  }\n\n  if (data.__ob__ instanceof Observer) {\n    return data.__ob__\n  }\n\n  return new Observer(data)\n}\n","import { Dep } from \"./observe/dep\"\nimport observe from \"./observe/index\"\nimport { nextTick, Watcher } from \"./observe/watcher\"\n\nexport function initState(vm) {\n  const options = vm.$options\n\n  if (options.data) {\n    initData(vm)\n  }\n\n  if (options.computed) {\n    initComputed(vm)\n  }\n}\n\nfunction proxy(vm, target, key) {\n  Object.defineProperty(vm, key, {\n    enumerable: true,\n    configurable: true,\n\n    get() {\n      return vm[target][key]\n    },\n\n    set(newVal) {\n      vm[target][key] = newVal\n    }\n  })\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data\n  data = typeof data === 'function' ? data.call(vm) : data\n\n  observe(data)\n\n  vm._data = data\n\n  for (let key in data) {\n    proxy(vm, '_data', key)\n  }\n}\n\nfunction initWatch(vm) {\n  const watch = vm.$options.watch\n  for (let key in watch) {\n    const handler = watch[key]\n\n    if (Array.isArray(handler)) {\n      for (let i = 0; i < handler.length; i++) {\n        createWatcher(vm, key, handler[i])\n      }\n    } else {\n      createWatcher(vm, key, handler)\n    }\n  }\n}\n\nfunction createWatcher(vm, key, handler) {\n  vm.$watch(key, handler)\n}\n\nfunction initComputed(vm) {\n  const { computed } = vm.$options\n  const watchers = vm._watcherList = {}\n  for (let key in computed) {\n    const userDef = computed[key]\n    const fn = typeof userDef === 'function' ? userDef : userDef.get\n    watchers[key] = new Watcher(vm, fn, { lazy: true })\n    defineComputed(vm, key, userDef)\n  }\n}\n\nfunction createComputedGetter(key) {\n  return function() {\n    const watcher = this._watcherList[key]\n\n    if (watcher.dirty) {\n      watcher.evaluate()\n    }\n\n    if (Dep.target) {\n      watcher.depend()\n    }\n\n    return watcher.value\n  }\n}\n\nfunction defineComputed(target, key, userDef) {\n  const setter = userDef.set || (() => {})\n  Object.defineProperty(target, key, {\n    get: createComputedGetter(key),\n    set: setter\n  })\n}\n\nexport function initStateMixin(Vue) {\n  Vue.prototype.$nextTick = nextTick\n\n  Vue.prototype.$watch = function(expOrFn, cb, options) {\n    new Watcher(this, expOrFn, { user: true }, cb)\n  }\n}\n","import { compileToFunction } from \"./compiler/index\";\nimport { callhook, mountComponent } from \"./lifecycle\";\nimport { initState } from \"./state\";\nimport { mergeOptions } from \"./utils\";\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this\n    vm.$options = mergeOptions(this.constructor.options, options)\n\n    callhook(vm, 'beforeCreate')\n    initState(vm)\n    callhook(vm, 'created')\n\n    if (options.el) {\n      vm.$mount(options.el)\n    }\n  };\n\n  Vue.prototype.$mount = function(el) {\n    const vm = this\n    el = document.querySelector(el)\n    const ops = vm.$options\n\n    let template\n\n    // 暂时不支持 ops.template 提供模板\n    if (el) {\n      template = el.outerHTML\n    }\n\n    if (template) {\n      const render = compileToFunction(template)\n      ops.render = render\n    }\n\n    mountComponent(vm, el)\n  }\n}\n","import { initGlobalApi } from \"./global-api\";\nimport { initMixin } from \"./init\";\nimport { initLifyCycle } from \"./lifecycle\";\nimport { initStateMixin } from './state';\n\nfunction Vue(options) {\n  this._init(options);\n}\n\ninitMixin(Vue);\ninitLifyCycle(Vue)\ninitGlobalApi(Vue)\ninitStateMixin(Vue)\n\nexport default Vue;\n"],"names":["starts","LIFE_CYCLE_LIST","forEach","hook","p","c","concat","mergeOptions","parent","child","options","key","mergeKey","hasOwnProperty","initGlobalApi","Vue","mixin","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","attribute","defaultTagRE","ELEMENT_TYPE","TEXT_TYPE","parseHTML","html","stack","currentTag","undefined","root","createASTElement","tag","attrs","type","children","start","tagName","ast","push","chars","text","replace","end","pop","length","textEnd","indexOf","advance","n","substring","parseStartTag","match","attr","name","value","startTagMatch","endTagName","genProps","str","valArray","split","item","JSON","stringify","slice","gen","node","codegen","test","tokens","lastIndex","exec","index","middleText","join","genChildren","map","code","compileToFunction","template","render","Function","id","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","Watcher","vm","expOrFn","cb","lazy","dirty","getter","deps","depSet","Set","get","user","queueWatcher","i","depend","dep","has","add","addSub","call","oldValue","newValue","watcherQueue","pending","flushWatcherQueue","copyedQueue","run","nextTick","callbackList","waiting","flushCallbackList","copyedCallbackList","callback","timerFunc","Promise","resolve","then","MutationObserver","observer","textNode","document","createTextNode","observe","characterData","textContent","setTimeout","createElementVNode","data","vnode","createTextVNode","isSameVnode","vnode1","vnode2","patchProps","el","oldProps","props","oldStyle","style","removeAttribute","styleName","setAttribute","createElm","createElement","appendChild","patch","oldVnode","isRealElement","nodeType","elm","parentElm","parentNode","newElm","insertBefore","nextSibling","removeChild","patchVnode","replaceChild","oldChildren","newChildren","mountChildren","innerHTML","initLifyCycle","prototype","_update","$el","_c","arguments","_v","_s","_render","$options","mountComponent","updateComponent","callhook","handlers","oldArrayProto","Array","newArrayProto","Object","create","methods","args","result","instered","ob","__ob__","observeArray","notify","Observer","defineProperty","enumerable","isArray","__proto__","walk","keys","defineReactive","depentArray","val","current","childOb","configurable","set","newVal","initState","initData","computed","initComputed","proxy","_data","watchers","_watcherList","userDef","fn","defineComputed","createComputedGetter","evaluate","setter","initStateMixin","$nextTick","$watch","initMixin","_init","constructor","$mount","querySelector","ops","outerHTML"],"mappings":"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"}