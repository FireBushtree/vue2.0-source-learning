{"version":3,"file":"vue.js","sources":["../src/compiler/parse.js","../src/compiler/index.js","../src/vdom/index.js","../src/lifecycle.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\nconst startTagClose = /^\\s*(\\/?)>/\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\nexport const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\n\nexport const ELEMENT_TYPE = 1\nexport const TEXT_TYPE = 3\n\nexport function parseHTML(html) {\n  const stack = []\n  let currentTag = undefined\n  let root = undefined\n\n  function createASTElement(tag, attrs) {\n    return {\n      tag,\n      type: ELEMENT_TYPE,\n      children: [],\n      attrs,\n      parent: null,\n    }\n  }\n\n  function start(tagName, attrs) {\n    const ast = createASTElement(tagName, attrs)\n\n    if (!root) {\n      root = ast\n    } else if (currentTag) {\n      currentTag.children.push(ast)\n      ast.parent = currentTag\n    }\n\n    currentTag = ast\n    stack.push(ast)\n  }\n\n  function chars(text) {\n    text = text.replace(/\\s/g, '')\n    text &&\n      currentTag.children.push({\n        type: TEXT_TYPE,\n        text,\n        parent: currentTag,\n      })\n  }\n\n  function end(tagName) {\n    stack.pop()\n    currentTag = stack[stack.length - 1]\n  }\n\n  while (html) {\n    const textEnd = html.indexOf('<')\n\n    function advance(n) {\n      html = html.substring(n)\n    }\n\n    function parseStartTag() {\n      const start = html.match(startTagOpen)\n\n      if (start) {\n        const match = {\n          tagName: start[1],\n          attrs: [],\n        }\n\n        advance(start[0].length)\n\n        let attr\n        let end\n        while (\n          !(end = html.match(startTagClose)) &&\n          (attr = html.match(attribute))\n        ) {\n          advance(attr[0].length)\n\n          match.attrs.push({\n            name: attr[1],\n            value: attr[3] || attr[4] || attr[5],\n          })\n        }\n\n        if (end) {\n          advance(end[0].length)\n        }\n\n        return match\n      }\n\n      return false\n    }\n\n    if (textEnd === 0) {\n      const startTagMatch = parseStartTag()\n\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs)\n        continue\n      }\n\n      let endTagName = html.match(endTag)\n\n      if (endTagName) {\n        end(endTagName[1])\n        advance(endTagName[0].length)\n        continue\n      }\n    }\n\n    if (textEnd > 0) {\n      const text = html.substring(0, textEnd)\n\n      if (text) {\n        chars(text)\n        advance(text.length)\n      }\n    }\n  }\n\n  return root\n}\n","import { defaultTagRE, ELEMENT_TYPE, parseHTML, TEXT_TYPE } from './parse'\n\nfunction genProps(attrs) {\n  let str = ''\n\n  attrs.forEach((attr) => {\n    if (attr.name === 'style') {\n      const valArray = attr.value.split(';')\n      attr.value = {}\n      valArray.forEach((item) => {\n        const [key, value] = item.split(':')\n        attr.value[key] = value\n      })\n    }\n\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\n  })\n\n  return `{${str.slice(0, -1)}}`\n}\n\nfunction gen(node) {\n  if (node.type === ELEMENT_TYPE) {\n    return codegen(node)\n  } else if (node.type === TEXT_TYPE) {\n    if (!defaultTagRE.test(node.text)) {\n      return `_v(${JSON.stringify(node.text)})`\n    } else {\n      const tokens = []\n      let match\n      let lastIndex = 0\n      defaultTagRE.lastIndex = 0\n      while ((match = defaultTagRE.exec(node.text))) {\n        if (match.index > lastIndex) {\n          const middleText = node.text.slice(lastIndex, match.index)\n          tokens.push(JSON.stringify(middleText))\n        }\n        tokens.push(`_s(${match[1]})`)\n        lastIndex = match.index + match[0].length\n      }\n\n      if (lastIndex < node.text.length - 1) {\n        tokens.push(JSON.stringify(node.text.slice(lastIndex)))\n      }\n\n      return `_v(${tokens.join('+')})`\n    }\n  }\n}\n\nfunction genChildren(children) {\n  if (children) {\n    return children.map((item) => gen(item)).join(',')\n  }\n}\n\nfunction codegen(ast) {\n  const code = `_c('${ast.tag}', ${\n    ast.attrs.length > 0 ? genProps(ast.attrs) : 'null'\n    } ${ast.children.length ? `,${genChildren(ast.children)}` : ''})`\n  return code\n}\n\nexport function compileToFunction(template) {\n  const ast = parseHTML(template)\n  let code = codegen(ast)\n  code = `with(this) {\n    return ${code}\n  }`\n  const render = new Function(code)\n\n  return render\n}\n","export function createElementVNode(vm, tag, data, ...children) {\r\n  data = data || {}\r\n  const key = data.key\r\n  key && delete data.key\r\n  return vnode(vm, tag, key, data, children)\r\n}\r\n\r\nexport function createTextVNode(vm, text) {\r\n  return vnode(vm, undefined, undefined, undefined, undefined, text)\r\n}\r\n\r\nexport function vnode(vm, tag, key, data, children, text) {\r\n  return {\r\n    vm,\r\n    tag,\r\n    key,\r\n    data,\r\n    children,\r\n    text\r\n  }\r\n}\r\n","import { createElementVNode, createTextVNode } from './vdom/index'\r\n\r\nfunction patchProps(el, props) {\r\n  for (const key in props) {\r\n    if (key === 'style') {\r\n      for (const styleName in props[key]) {\r\n        el.style[styleName] = props[key][styleName]\r\n      }\r\n    } else {\r\n      el.setAttribute(key, props[key])\r\n    }\r\n  }\r\n}\r\n\r\nfunction createElm(vnode) {\r\n  const { tag, data, children, text } = vnode\r\n\r\n  if (typeof tag === 'string') {\r\n    vnode.el = document.createElement(tag)\r\n    patchProps(vnode.el, data)\r\n    children.forEach((item) => {\r\n      vnode.el.appendChild(createElm(item))\r\n    })\r\n  } else {\r\n    vnode.el = document.createTextNode(text)\r\n  }\r\n\r\n  return vnode.el\r\n}\r\n\r\nfunction patch(oldVNode, vnode) {\r\n  const isRealElement = oldVNode.nodeType\r\n\r\n  if (isRealElement) {\r\n    const elm = oldVNode\r\n    const parentElm = elm.parentNode\r\n    const newElm = createElm(vnode)\r\n    parentElm.insertBefore(newElm, elm.nextSibling)\r\n    parentElm.removeChild(elm)\r\n\r\n    return newElm\r\n  } else {\r\n  }\r\n}\r\n\r\nexport function initLifyCycle(Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    const vm = this\r\n    const el = vm.$el\r\n    vm.$el = patch(el, vnode)\r\n  }\r\n\r\n  Vue.prototype._c = function () {\r\n    return createElementVNode(this, ...arguments)\r\n  }\r\n\r\n  Vue.prototype._v = function () {\r\n    return createTextVNode(this, ...arguments)\r\n  }\r\n\r\n  Vue.prototype._s = function (value) {\r\n    return JSON.stringify(value)\r\n  }\r\n\r\n  Vue.prototype._render = function () {\r\n    const vm = this\r\n    return vm.$options.render.call(vm)\r\n  }\r\n}\r\n\r\nexport function mountComponent(vm, el) {\r\n  vm.$el = el\r\n  vm._update(vm._render())\r\n}\r\n","const oldArrayProto = Array.prototype\nexport const newArrayProto = Object.create(oldArrayProto)\n\nconst methods = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'reverse',\n  'sort',\n  'splice'\n]\n\nmethods.forEach(item => {\n  newArrayProto[item] = function(...args) {\n    const result = oldArrayProto[item].call(this, ...args)\n\n    let instered = undefined\n    let ob = this.__ob__\n\n    if (item === 'push' || item === 'unshift') {\n      instered = args\n    }\n\n    if (item === 'splice') {\n      instered = args.slice(2)\n    }\n\n    if (instered) {\n      ob.observeArray(instered)\n    }\n\n    return result\n  }\n})\n","import { newArrayProto } from './array'\n\nclass Observer {\n  constructor(data) {\n    data.__ob__ = this\n    Object.defineProperty(data, '__ob__', {\n      value: this,\n      enumerable: false,\n    })\n\n    if (Array.isArray(data)) {\n      data.__proto__ = newArrayProto\n      this.observeArray(data)\n      return\n    }\n\n    this.walk(data)\n  }\n\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key])\n    })\n  }\n\n  observeArray(data) {\n    data.forEach((item) => observe(item))\n  }\n}\n\nfunction defineReactive(data, key, val) {\n  observe(val)\n\n  Object.defineProperty(data, key, {\n    configurable: true,\n    enumerable: true,\n    get() {\n      return val\n    },\n\n    set(newVal) {\n      if (newVal === val) {\n        return\n      }\n      observe(newVal)\n\n      val = newVal\n    },\n  })\n}\n\nexport default function observe(data) {\n  if (typeof data !== 'object' && data !== null) {\n    return\n  }\n\n  if (data.__ob__ instanceof Observer) {\n    return data.__ob__\n  }\n\n  return new Observer(data)\n}\n","import observe from \"./observe/index\"\n\nexport function initState(vm) {\n  const options = vm.$options\n\n  if (options.data) {\n    initData(vm)\n  }\n}\n\nfunction proxy(vm, target, key) {\n  Object.defineProperty(vm, key, {\n    enumerable: true,\n    configurable: true,\n\n    get() {\n      return vm[target][key]\n    },\n\n    set(newVal) {\n      vm[target][key] = newVal\n    }\n  })\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data\n  data = typeof data === 'function' ? data.call(vm) : data\n\n  observe(data)\n\n  vm._data = data\n\n  for (let key in data) {\n    proxy(vm, '_data', key)\n  }\n}","import { compileToFunction } from \"./compiler/index\";\nimport { mountComponent } from \"./lifecycle\";\nimport { initState } from \"./state\";\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this\n    vm.$options = options\n\n    initState(vm)\n\n    if (options.el) {\n      vm.$mount(options.el)\n    }\n  };\n\n  Vue.prototype.$mount = function(el) {\n    const vm = this\n    el = document.querySelector(el)\n    const ops = vm.$options\n\n    let template\n\n    // 暂时不支持 ops.template 提供模板\n    if (el) {\n      template = el.outerHTML\n    }\n\n    if (template) {\n      const render = compileToFunction(template)\n      ops.render = render\n    }\n\n    mountComponent(vm, el)\n  }\n}\n","import { initMixin } from \"./init\";\nimport { initLifyCycle } from \"./lifecycle\";\n\nfunction Vue(options) {\n  this._init(options);\n}\n\ninitMixin(Vue);\ninitLifyCycle(Vue)\n\nexport default Vue;\n"],"names":["ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","attribute","defaultTagRE","ELEMENT_TYPE","TEXT_TYPE","parseHTML","html","stack","currentTag","undefined","root","createASTElement","tag","attrs","type","children","parent","start","tagName","ast","push","chars","text","replace","end","pop","length","textEnd","indexOf","advance","n","substring","parseStartTag","match","attr","name","value","startTagMatch","endTagName","genProps","str","forEach","valArray","split","item","key","JSON","stringify","slice","gen","node","codegen","test","tokens","lastIndex","exec","index","middleText","join","genChildren","map","code","compileToFunction","template","render","Function","createElementVNode","vm","data","vnode","createTextVNode","patchProps","el","props","styleName","style","setAttribute","createElm","document","createElement","appendChild","createTextNode","patch","oldVNode","isRealElement","nodeType","elm","parentElm","parentNode","newElm","insertBefore","nextSibling","removeChild","initLifyCycle","Vue","prototype","_update","$el","_c","arguments","_v","_s","_render","$options","call","mountComponent","oldArrayProto","Array","newArrayProto","Object","create","methods","args","result","instered","ob","__ob__","observeArray","Observer","defineProperty","enumerable","isArray","__proto__","walk","keys","defineReactive","observe","val","configurable","get","set","newVal","initState","options","initData","proxy","target","_data","initMixin","_init","$mount","querySelector","ops","outerHTML"],"mappings":"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"}